<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Голосовой Анализ Энергетического Состояния</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            color: #333;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        h1 {
            color: #4a90e2;
        }
        #recordButton {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
            margin: 20px 0;
        }
        #recordButton:hover {
            background-color: #357abd;
        }
        #status {
            font-size: 16px;
            margin: 10px 0;
        }
        #analysis {
            display: none;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            max-width: 800px;
            margin: 20px auto;
            text-align: left;
        }
        .section {
            margin-bottom: 20px;
        }
        .recommendation {
            background-color: #e6f7ff;
            padding: 10px;
            border-left: 5px solid #4a90e2;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>От Медитации до AI: Анализ Вашего Энергетического Состояния</h1>
    <p>Запишите 15-секундное голосовое сообщение, и наша система на основе биообратной связи (как в Genius Insight) проанализирует ваш голос для выявления скрытого стресса, вибраций и энергетического баланса. Вы получите полный профессиональный анализ и персонализированные рекомендации по медитациям, упражнениям и практикам из энерготерапии и нумерологии.</p>
    
    <button id="recordButton">Начать запись (15 секунд)</button>
    <p id="status">Нажмите кнопку, чтобы начать запись.</p>
    
    <div id="analysis">
        <h2>Результаты Анализа</h2>
        <div id="results" class="section"></div>
        <h2>Рекомендации</h2>
        <div id="recommendations" class="section"></div>
    </div>

    <script>
        // База данных из документа: моменты анализа по голосу и рекомендации
        const analysisPoints = [
            "Уровень стресса: Выявление скрытого стресса через анализ вибраций голоса (Genius Insight).",
            "Энергетический баланс: Оценка внутреннего баланса, включая состояние чакр (перегрев, блокировка или недостаток энергии).",
            "Вибрации: Анализ частот голоса для определения текущего уровня вибраций и эмоционального состояния.",
            "Психофизиологическое состояние: Измерение через голос вариабельности сердечного ритма (ВСР) и ЭЭГ-подобные индикаторы.",
            "Общий уровень энергии: Определение, есть ли усталость, тревога или гармония."
        ];

        const recommendationsBase = [
            { type: "Медитация", desc: "Медитация на гармонизацию чакр: Фокус на визуализации цвета и мантрах для каждой чакры (28, 54)." },
            { type: "Медитация", desc: "Медитация на снятие тревоги: Используйте бинауральные биения в альфа-диапазоне для расслабления (43)." },
            { type: "Медитация", desc: "Медитация на усиление интуиции: Высокочастотные звуки для седьмой чакры (гамма-волны)." },
            { type: "Медитация", desc: "Медитация на защиту энергетического поля: Короткая практика с Hemi-Sync для создания щита (14)." },
            { type: "Упражнение", desc: "EFT/Tapping: Техника постукивания для снижения стресса, сравнимая с КПТ (12)." },
            { type: "Упражнение", desc: "Глубокое дыхание: Базовая техника расслабления для новичков (78)." },
            { type: "Упражнение", desc: "Работа с чакрами: Визуализация и фокус на точках для баланса энергии (28)." },
            { type: "Нумерология", desc: "Расчет Числа Судьбы: На основе даты рождения для понимания сильных сторон (9, 53)." },
            { type: "Технология", desc: "Hemi-Sync: Синхронизация гемисфер мозга для глубокого расслабления (14)." },
            { type: "Технология", desc: "Биообратная связь: Отслеживание HRV для управления стрессом (7, 13)." },
            { type: "Практика", desc: "Интеграция Reiki с Hemi-Sync: Для профессионалов, углубление исцеления (14)." },
            { type: "Практика", desc: "Ежедневные задания: Формирование привычек медитации (93, 98)." }
        ];

        // Функция для симуляции анализа (в реальности - отправка на сервер с AI)
        function simulateAnalysis() {
            // Симулируем случайные результаты на основе базы
            let stressLevel = Math.floor(Math.random() * 101); // 0-100%
            let energyBalance = ['Гармоничный', 'Слабый', 'Перегруженный'][Math.floor(Math.random() * 3)];
            let vibrations = ['Высокие (гармония)', 'Средние (баланс нужен)', 'Низкие (стресс)'][Math.floor(Math.random() * 3)];
            let chakraState = 'Состояние чакр: ' + ['Корневая чакра заблокирована', 'Солнечное сплетение перегрето', 'Сердечная чакра в балансе'][Math.floor(Math.random() * 3)];

            let resultsHtml = `
                <p><strong>Уровень стресса:</strong> ${stressLevel}% (скрытый стресс выявлен через вибрации голоса).</p>
                <p><strong>Энергетический баланс:</strong> ${energyBalance}.</p>
                <p><strong>Вибрации:</strong> ${vibrations}.</p>
                <p><strong>${chakraState}</strong></p>
            `;

            // Выбираем 4-6 случайных рекомендаций
            let selectedRecs = recommendationsBase.sort(() => 0.5 - Math.random()).slice(0, Math.floor(Math.random() * 3) + 4);
            let recsHtml = selectedRecs.map(rec => `
                <div class="recommendation">
                    <strong>${rec.type}:</strong> ${rec.desc}
                </div>
            `).join('');

            document.getElementById('results').innerHTML = resultsHtml;
            document.getElementById('recommendations').innerHTML = recsHtml;
            document.getElementById('analysis').style.display = 'block';
        }

        // Логика записи голоса
        let mediaRecorder;
        let chunks = [];
        const recordButton = document.getElementById('recordButton');
        const status = document.getElementById('status');

        recordButton.addEventListener('click', async () => {
            if (!navigator.mediaDevices) {
                alert('Ваш браузер не поддерживает запись аудио.');
                return;
            }

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.start();
                status.textContent = 'Запись идет... (15 секунд)';
                recordButton.disabled = true;

                mediaRecorder.ondataavailable = (e) => chunks.push(e.data);
                mediaRecorder.onstop = () => {
                    // Здесь в реальности - отправка blobs на сервер для анализа
                    // Для симуляции - просто вызываем анализ
                    simulateAnalysis();
                    status.textContent = 'Анализ завершен.';
                    recordButton.disabled = false;
                    recordButton.textContent = 'Повторить запись';
                    chunks = []; // Очистка
                };

                setTimeout(() => {
                    mediaRecorder.stop();
                    status.textContent = 'Обработка записи...';
                }, 15000); // 15 секунд
            } catch (err) {
                alert('Ошибка доступа к микрофону: ' + err.message);
            }
        });
    </script>
</body>
</html>
