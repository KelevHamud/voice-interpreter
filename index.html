
                        <!DOCTYPE html>
                        <html lang="en">
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <style>
                body {
                  background-color: white; /* Ensure the iframe has a white background */
                }

                
              </style>
                        </head>
                        <body>
                            <div class="assessment-item">
    <label for="voice-analysis">–ì–æ–ª–æ—Å–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (15 —Å–µ–∫—É–Ω–¥)</label>
    <div class="voice-recorder">
        <button id="record-btn" class="btn voice-btn">
            <span id="record-icon">üéôÔ∏è</span> 
            <span id="record-text">–ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å (15 —Å–µ–∫)</span>
        </button>
        <div id="recording-indicator" class="recording-indicator">
            <div class="pulse"></div>
            <span id="timer">00:00</span>
        </div>
        <div id="voice-result" class="voice-result"></div>
    </div>
    <div class="disclaimer" style="margin-top: 8px;">
        * –ì–æ–ª–æ—Å–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º FDA –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å—Ç—Ä–µ—Å—Å–∞ –∏ —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏. 
        –î–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–µ—Å—Å–∏–∏.
    </div>
</div>



              <script>
                              // –ì–æ–ª–æ—Å–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ - –¥–µ–º–æ –≤–µ—Ä—Å–∏—è —Å —Å–∏–º—É–ª—è—Ü–∏–µ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ API
document.addEventListener('DOMContentLoaded', function() {
    const recordBtn = document.getElementById('record-btn');
    const recordIcon = document.getElementById('record-icon');
    const recordText = document.getElementById('record-text');
    const timerDisplay = document.getElementById('timer');
    const recordingIndicator = document.getElementById('recording-indicator');
    const voiceResult = document.getElementById('voice-result');
    const pssSlider = document.getElementById('pss');
    const pssValue = document.getElementById('pss-value');
    const anxietySelect = document.getElementById('anxiety');
    const emotionRegSlider = document.getElementById('emotion-reg');
    const emotionRegValue = document.getElementById('emotion-reg-value');
    
    let isRecording = false;
    let mediaRecorder;
    let audioChunks = [];
    let countdown;
    let seconds = 0;
    
    recordBtn.addEventListener('click', async () => {
        if (isRecording) return;
        
        try {
            // –ó–∞–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
            mediaRecorder = new MediaRecorder(stream, {
                mimeType: 'audio/webm;codecs=opus'
            });
            
            audioChunks = [];
            mediaRecorder.ondataavailable = event => {
                audioChunks.push(event.data);
            };
            
            mediaRecorder.onstop = async () => {
                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤ –ø–æ—Ç–æ–∫–∞
                stream.getTracks().forEach(track => track.stop());
                
                // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –∞–Ω–∞–ª–∏–∑ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –≤—ã–∑–æ–≤ API Ellipsis Health)
                simulateVoiceAnalysis();
            };
            
            // –ù–∞—á–∞–ª–æ –∑–∞–ø–∏—Å–∏
            mediaRecorder.start();
            isRecording = true;
            seconds = 0;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
            recordBtn.classList.add('recording');
            recordIcon.textContent = '‚è∫Ô∏è';
            recordText.textContent = '–ò–¥–µ—Ç –∑–∞–ø–∏—Å—å...';
            recordingIndicator.style.display = 'flex';
            
            // –¢–∞–π–º–µ—Ä –Ω–∞ 15 —Å–µ–∫—É–Ω–¥
            countdown = setInterval(() => {
                seconds++;
                const displaySec = String(seconds).padStart(2, '0');
                timerDisplay.textContent = `00:${displaySec}`;
                
                if (seconds >= 15) {
                    stopRecording();
                }
            }, 1000);
            
        } catch (err) {
            console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É:', err);
            alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.');
        }
    });
    
    function stopRecording() {
        clearInterval(countdown);
        if (mediaRecorder && mediaRecorder.state !== 'inactive') {
            mediaRecorder.stop();
        }
        isRecording = false;
    }
    
    function simulateVoiceAnalysis() {
        // –°–∏–º—É–ª—è—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –≥–æ–ª–æ—Å–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ API)
        voiceResult.innerHTML = '<div class="loading-voice"><div class="spinner"></div> –ê–Ω–∞–ª–∏–∑ –≥–æ–ª–æ—Å–∞ –∏ –æ—Ü–µ–Ω–∫–∞ —Å—Ç—Ä–µ—Å—Å–∞...</div>';
        recordBtn.disabled = true;
        
        setTimeout(() => {
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ "–∞–Ω–∞–ª–∏–∑–∞"
            const stressLevel = Math.floor(Math.random() * 15) + 20; // 20-35 –ø–æ —à–∫–∞–ª–µ PSS
            const anxietyLevel = stressLevel > 28 ? 'high' : 'medium';
            const emotionRegLevel = Math.floor((stressLevel / 40) * 10) + 1;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
            pssSlider.value = stressLevel;
            pssValue.textContent = stressLevel;
            anxietySelect.value = anxietyLevel;
            emotionRegSlider.value = emotionRegLevel;
            emotionRegValue.textContent = emotionRegLevel;
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            const stressText = stressLevel > 27 ? '–≤—ã—Å–æ–∫–∏–π' : (stressLevel > 19 ? '—Å—Ä–µ–¥–Ω–∏–π' : '–Ω–∏–∑–∫–∏–π');
            const stressColor = stressLevel > 27 ? 'var(--warning)' : (stressLevel > 19 ? '#f39c12' : 'var(--success)');
            
            voiceResult.innerHTML = `
                <div class="voice-analysis-result">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                        <span style="font-size: 1.5rem;">‚úÖ</span>
                        <strong style="font-size: 1.1rem;">–ì–æ–ª–æ—Å–æ–≤–æ–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω</strong>
                    </div>
                    <div style="background: rgba(67, 97, 238, 0.08); border-radius: 10px; padding: 12px; margin-top: 8px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                            <span>–£—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–µ—Å—Å–∞ (PSS):</span>
                            <strong style="color: ${stressColor};">${stressLevel}/40 (${stressText})</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                            <span>–¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å:</span>
                            <strong>${anxietyLevel === 'high' ? '–í—ã—Å–æ–∫–∞—è' : (anxietyLevel === 'medium' ? '–°—Ä–µ–¥–Ω—è—è' : '–ù–∏–∑–∫–∞—è')}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>–†–µ–≥—É–ª—è—Ü–∏—è —ç–º–æ—Ü–∏–π:</span>
                            <strong>${emotionRegLevel}/10</strong>
                        </div>
                    </div>
                    <div style="font-size: 0.9rem; color: var(--gray); margin-top: 10px; font-style: italic;">
                        –ê–Ω–∞–ª–∏–∑ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–∫—É—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö: —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —Ç–µ–º–ø —Ä–µ—á–∏, —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, 
                        –≤–∞—Ä–∏–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—É–∑. –¢–æ—á–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º (–∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å –æ–ø—Ä–æ—Å–Ω–∏–∫–∞–º–∏ >0.85).
                    </div>
                </div>
            `;
            
            recordBtn.disabled = false;
            recordBtn.classList.remove('recording');
            recordIcon.textContent = 'üéôÔ∏è';
            recordText.textContent = '–ó–∞–ø–∏—Å–∞—Ç—å —Å–Ω–æ–≤–∞';
            recordingIndicator.style.display = 'none';
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                document.querySelector('#generate-report').scrollIntoView({behavior: 'smooth', block: 'center'});
            }, 2000);
            
        }, 1800);
    }
    
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è
    const style = document.createElement('style');
    style.textContent = `
        .voice-recorder {
            background: rgba(247, 37, 133, 0.05);
            border-radius: 12px;
            padding: 15px;
            border: 1px dashed var(--warning);
            text-align: center;
        }
        
        .voice-btn {
            background: linear-gradient(135deg, var(--accent), var(--primary));
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
            display: block;
            font-size: 1.1rem;
            padding: 14px 20px;
            transition: var(--transition);
        }
        
        .voice-btn:hover:not(:disabled) {
            transform: scale(1.03);
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.4);
        }
        
        .voice-btn.recording {
            background: linear-gradient(135deg, #e63946, #c1121f);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(247, 37, 133, 0); }
            100% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0); }
        }
        
        .recording-indicator {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            font-weight: bold;
            color: var(--warning);
            font-size: 1.3rem;
        }
        
        .pulse {
            width: 15px;
            height: 15px;
            background: var(--warning);
            border-radius: 50%;
            box-shadow: 0 0 0 0 rgba(247, 37, 133, 0.7);
            animation: pulse-ring 1.5s infinite;
        }
        
        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 1; }
            70% { transform: scale(1.8); opacity: 0.5; }
            100% { transform: scale(2.2); opacity: 0; }
        }
        
        .voice-analysis-result {
            text-align: left;
            margin-top: 15px;
            padding: 15px;
            background: rgba(76, 201, 240, 0.1);
            border-radius: 10px;
            border-left: 4px solid var(--success);
        }
        
        .loading-voice {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            font-weight: 500;
        }
        
        .spinner {
            border: 3px solid rgba(67, 97, 238, 0.2);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
    `;
    document.head.appendChild(style);
});

   // –í–º–µ—Å—Ç–æ simulateVoiceAnalysis() –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:
   const response = await fetch('https://api.ellipsishealth.com/v1/analyze', {
     method: 'POST',
     headers: {
       'Authorization': 'Bearer YOUR_API_KEY',
       'Content-Type': 'audio/webm'
     },
     body: new Blob(audioChunks, {type: 'audio/webm'})
   });
   const results = await response.json();
   // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ API
   

              </script>
                        </body>
                        </html>
                    
